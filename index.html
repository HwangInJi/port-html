<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>포트폴리오</title>

    <link rel="stylesheet" href="/css/style.css" />
    <link
      href="https://fonts.cdnfonts.com/css/fruit-punch-2"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Jua&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Abel&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/font-iropke-batang/1.2/font-iropke-batang.css"
    />
  </head>

  <body>
    <div id="wrap">
      <div class="header">
        <h1 class="header_h1">PORT3</h1>
        <div class="underline">
          <div class="logo">
            <img src="/img/run.svg" alt="run" />
          </div>
          <div id="progress-time-fill"></div>
          <p>20s</p>
        </div>
      </div>
      <div class="side_text">
        <div class="left_line">
          <img src="/img/line1.svg" alt="line" />
          <img src="/img/line4.svg" alt="line" />
        </div>
        <svg class="svg_area" xmlns="http://www.w3.org/2000/svg">
          <rect x="0" y="0" width="100%" height="100%" fill="none" />
          <foreignObject x="0" y="10" width="100%" height="80">
            <div xmlns="http://www.w3.org/1999/xhtml">
              <div class="scrolling-text">
                <p class="side_p">
                  해당 키워드를 시간 내에 누르시면 다음 포트폴리오 내용으로
                  넘어갑니다. 모르시면 패스해주세요! 해당 키워드를 시간 내에
                  누르시면 다음 포트폴리오 내용으로 넘어갑니다. 모르시면
                  패스해주세요!
                </p>
              </div>
            </div>
          </foreignObject>
        </svg>
        <div class="right_line">
          <img src="/img/line2.svg" alt="line" />
          <img src="/img/line3.svg" alt="line" />
        </div>
        <div class="line_all">
          <img src="/img/line.svg" alt="line" />
        </div>
        <button class="menu_btn">
          <ul>
            <li><a href="#">메뉴</a></li>
          </ul>
        </button>
      </div>
    </div>

    <main id="main">
      <p class="main_text">
        <span>c</span><span>r</span><span>e</span><span>a</span><span>i</span
        ><span>v</span><span>e</span
        ><em><span>i</span><span>n</span><span>j</span><span>i</span></em
        ><span>p</span><span>o</span><span>r</span><span>t</span><span>f</span
        ><span>o</span> <span>l</span><span>i</span><span>o</span
        ><em
          ><span>f</span><span>r</span><span>o</span><span>n</span><span>t</span
          ><span>e</span><span>n</span><span>d</span></em
        ><span>i</span><span>v</span><span>e</span><span>i</span><span>n</span
        ><span>j</span> <span>i</span><span>t</span
        ><em><span>p</span><span>o</span><span>r</span><span>t</span></em
        ><span>s</span><span>c</span><span>r</span><span>e</span><span>a</span
        ><span>t</span><span>i</span><span>v</span><span>e</span><span>i</span
        ><span>n</span> <span>j</span><span>i</span><span>p</span><span>o</span
        ><span>r</span><span>t</span><span>f</span><span>o</span><span>l</span
        ><span>i</span
        ><em
          ><span>f</span><span>o</span><span>l</span><span>i</span
          ><span>o</span></em
        ><span>n</span><span>j</span> <span>i</span><span>p</span
        ><em><span>n</span><span>e</span><span>x</span><span>t</span></em
        ><span>o</span><span>l</span><span>i</span><span>o</span><span>i</span
        ><span>n</span><span>j</span><span>i</span><span>p</span><span>o</span
        ><span>r</span> <span>t</span><span>f</span><span>o</span><span>l</span
        ><span>i</span><span>o</span><span>i</span><span>n</span><span>j</span
        ><span>i</span
        ><em
          ><span>s</span><span>e</span><span>c</span><span>t</span><span>i</span
          ><span>o</span><span>n</span></em
        >
      </p>
    </main>

    <div class="aboutme">
      <h1 class="about_title">ABOUT ME</h1>
      <p class="about_text">
        저는 어떤 일이든 튼튼한 기초가 성공의 열쇠라고 믿습니다.<br />
        조금씩 쌓아온 이 기초라는 기반을 바탕으로 꾸준히 성장해 나아가는
        개발자가 되겠습니다.
      </p>
    </div>
  </body>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      let sideText = document.querySelector(".side_p");

      let distance = sideText.scrollWidth;
      let velocity = 100; // px per second
      let parentWidth = sideText.parentElement.clientWidth;

      let time = distance / velocity;
      let finalCalc = ((distance + parentWidth) / parentWidth) * 100;

      sideText.style.setProperty("animation-duration", `${time}s`);
      sideText.style.setProperty("animation-timing-function", "linear");
      sideText.style.setProperty("animation-iteration-count", "infinite");
    });

    // 5초 후 애니메이션을 멈추고 em 태그만 빛나게 하기
    setTimeout(() => {
      const spans = document.querySelectorAll(".main_text span");
      spans.forEach((span) => {
        span.style.animation = "none";
        span.style.color = "#111";
        span.style.textShadow = "none";
      });
      const emSpans = document.querySelectorAll(".main_text em span");
      emSpans.forEach((emSpan) => {
        emSpan.style.animation = "none";
        emSpan.style.color = "#D9D9D9";
        emSpan.style.textShadow = "none";
      });
    }, 5000);

    // logo 애니메이션
    var $ = jQuery;
    var animationTime = 20,
      days = 7;

    $(document).ready(function () {
      $("#progress-time-fill, #death-group").css({
        "animation-duration": animationTime + "s",
      });

      var deadlineAnimation = function () {
        setTimeout(function () {
          $("#designer-arm-grop").css({ "animation-duration": "0.1s" });
        }, 0);

        setTimeout(function () {
          $("#designer-arm-grop").css({ "animation-duration": "1s" });
        }, 4000);

        setTimeout(function () {
          $("#designer-arm-grop").css({ "animation-duration": "0.7s" });
        }, 8000);

        setTimeout(function () {
          $("#designer-arm-grop").css({ "animation-duration": "0.3s" });
        }, 12000);

        setTimeout(function () {
          $("#designer-arm-grop").css({ "animation-duration": "0.2s" });
        }, 15000);
      };

      function timer(totalTime, deadline) {
        var time = totalTime * 1000;
        var dayDuration = time / deadline;
        var actualDay = deadline;

        var timer = setInterval(countTime, dayDuration);

        function countTime() {
          --actualDay;
          $(".deadline-days .day").text(actualDay);

          if (actualDay == 0) {
            clearInterval(timer);
            $(".deadline-days .day").text(deadline);
          }
        }
      }

      var deadlineText = function () {
        var $el = $(".deadline-days");
        var html =
          '<div class="mask-red"><div class="inner">' +
          $el.html() +
          '</div></div><div class="mask-white"><div class="inner">' +
          $el.html() +
          "</div></div>";
        $el.html(html);
      };

      deadlineText();

      deadlineAnimation();
      timer(animationTime, days);

      setInterval(function () {
        timer(animationTime, days);
        deadlineAnimation();

        console.log("begin interval", animationTime * 1000);
      }, animationTime * 1000);
    });
  </script>
</html>
